<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="vue_test/vue.js"></script>
    <style>
        * {
            /*margin: 0;*/
            padding: 0;
        }

        ul li {
            list-style: none;
            border-bottom: 1px solid black;
        }
    </style>
</head>
<body>
<div id="music">
    <!--<audio :src="currentsong" autoplay controls @ended="nextSong"></audio>-->
    <audio :src="curSong" autoplay="" controls="" @ended="nextSong"></audio>
    <ul>
        <li v-for="(item,index) in audios" @click="clickhandler(index)">
            <h3>歌名：{{item.name}}</h3>
            <p>歌手：{{item.author}}</p>
        </li>
    </ul>
    <button @click="addSong">添加一首歌</button>
</div>
<script>
    var songs = [
        {id: 1, src: './fonts/01.mp3', name: '突然好想你', author: 'Axx'},
        {id: 2, src: './fonts/02.mp3', name: '燕尾蝶', author: 'Bxx'},
        {id: 3, src: './fonts/03.mp3', name: '突然好想你2', author: 'Cxx'},
        {id: 4, src: './fonts/04.mp3', name: '离开地球表面', author: 'Dxx'},
    ];

    var music = new Vue({
        el: '#music',
        data: {
            audios: songs,
            // currentsong: './fonts/01.mp3',
            currnetIndex: 0
        },
        methods: {
            clickhandler(index) {
                // this.curSong = this.audios[index].src;
                this.currnetIndex = index
            },
            nextSong() {
                if (this.currentindex === this.audios.length) {
                    this.currentindex = -1
                }
                this.currnetIndex++;
                // this.currentsong = this.curSong
            },
            addSong() {
                this.audios.push(
                    {id: 5, src: './fonts/04.mp3', name: 'xxxE', author: 'Exx'},
                );
            }
        },
        computed: {
            curSong() {
                return this.audios[this.currnetIndex].src;
            },
            // singSong: {
            //     set: function (newvalue) {
            //         this.currentsong = newvalue;
            //     },
            //     get: function () {
            //         return this.audios[this.currnetIndex].src;
            //     },
            // }

        }
    });

</script>
</body>
</html>